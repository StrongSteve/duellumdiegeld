@tailwind base;
@tailwind components;
@tailwind utilities;

/* =====================================================
   Base Styles
   ===================================================== */
@layer base {
  html {
    @apply antialiased;
    font-feature-settings: "cv02", "cv03", "cv04", "cv11";
  }

  body {
    @apply bg-slate-900 text-white min-h-screen;
    /* Prevent overscroll bounce on iOS */
    overscroll-behavior: none;
  }

  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }

  /* Selection styling */
  ::selection {
    @apply bg-primary-500 text-white;
  }

  /* Safe area padding for notched devices */
  :root {
    --safe-top: env(safe-area-inset-top, 0px);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --safe-left: env(safe-area-inset-left, 0px);
    --safe-right: env(safe-area-inset-right, 0px);
  }
}

/* =====================================================
   Component Styles
   ===================================================== */
@layer components {
  /* Primary Button */
  .btn-primary {
    @apply inline-flex items-center justify-center px-8 py-4 text-xl font-semibold text-white
           bg-primary-600 hover:bg-primary-700 active:bg-primary-800
           rounded-xl shadow-lg shadow-primary-500/30
           transition-all duration-200 ease-out
           min-h-touch min-w-touch
           focus:outline-none focus:ring-4 focus:ring-primary-500/50
           disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-primary-600;
  }

  /* Secondary Button */
  .btn-secondary {
    @apply inline-flex items-center justify-center px-6 py-3 text-lg font-medium
           text-slate-300 bg-slate-700 hover:bg-slate-600 active:bg-slate-800
           rounded-lg shadow-md
           transition-all duration-200 ease-out
           min-h-touch min-w-touch
           focus:outline-none focus:ring-4 focus:ring-slate-500/50
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* Gold/Accent Button */
  .btn-gold {
    @apply inline-flex items-center justify-center px-8 py-4 text-xl font-bold
           text-slate-900 bg-gradient-to-r from-gold-400 to-gold-500
           hover:from-gold-500 hover:to-gold-600
           rounded-xl shadow-lg shadow-gold-500/30
           transition-all duration-200 ease-out
           min-h-touch min-w-touch
           focus:outline-none focus:ring-4 focus:ring-gold-500/50;
  }

  /* Danger Button */
  .btn-danger {
    @apply inline-flex items-center justify-center px-6 py-3 text-lg font-medium
           text-white bg-danger-600 hover:bg-danger-700 active:bg-danger-800
           rounded-lg shadow-md
           transition-all duration-200 ease-out
           min-h-touch min-w-touch
           focus:outline-none focus:ring-4 focus:ring-danger-500/50;
  }

  /* Success Button */
  .btn-success {
    @apply inline-flex items-center justify-center px-6 py-3 text-lg font-medium
           text-white bg-success-600 hover:bg-success-700 active:bg-success-800
           rounded-lg shadow-md
           transition-all duration-200 ease-out
           min-h-touch min-w-touch
           focus:outline-none focus:ring-4 focus:ring-success-500/50;
  }

  /* Outline Button */
  .btn-outline {
    @apply inline-flex items-center justify-center px-6 py-3 text-lg font-medium
           text-slate-300 border-2 border-slate-600 hover:border-slate-500 hover:bg-slate-800
           rounded-lg
           transition-all duration-200 ease-out
           min-h-touch min-w-touch
           focus:outline-none focus:ring-4 focus:ring-slate-500/50;
  }

  /* Icon Button */
  .btn-icon {
    @apply inline-flex items-center justify-center w-12 h-12 text-xl
           text-slate-400 hover:text-white hover:bg-slate-700
           rounded-full
           transition-all duration-200 ease-out
           focus:outline-none focus:ring-4 focus:ring-slate-500/50;
  }

  /* Cards */
  .card {
    @apply bg-slate-800 rounded-2xl shadow-xl border border-slate-700/50;
  }

  .card-header {
    @apply px-6 py-4 border-b border-slate-700/50;
  }

  .card-body {
    @apply p-6;
  }

  /* Input Fields */
  .input {
    @apply w-full px-4 py-3 text-lg text-white bg-slate-700 border border-slate-600
           rounded-lg placeholder-slate-400
           transition-all duration-200
           focus:outline-none focus:border-primary-500 focus:ring-4 focus:ring-primary-500/20
           min-h-touch;
  }

  .input-error {
    @apply border-danger-500 focus:border-danger-500 focus:ring-danger-500/20;
  }

  /* Labels */
  .label {
    @apply block text-sm font-medium text-slate-300 mb-2;
  }

  /* Select */
  .select {
    @apply w-full px-4 py-3 text-lg text-white bg-slate-700 border border-slate-600
           rounded-lg appearance-none cursor-pointer
           transition-all duration-200
           focus:outline-none focus:border-primary-500 focus:ring-4 focus:ring-primary-500/20
           min-h-touch;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%239ca3af' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1.5em 1.5em;
    padding-right: 2.5rem;
  }

  /* Badge */
  .badge {
    @apply inline-flex items-center px-3 py-1 text-sm font-medium rounded-full;
  }

  .badge-primary {
    @apply bg-primary-500/20 text-primary-400;
  }

  .badge-success {
    @apply bg-success-500/20 text-success-500;
  }

  .badge-danger {
    @apply bg-danger-500/20 text-danger-500;
  }

  .badge-gold {
    @apply bg-gold-500/20 text-gold-500;
  }

  /* Progress Bar */
  .progress-bar {
    @apply h-2 bg-slate-700 rounded-full overflow-hidden;
  }

  .progress-bar-fill {
    @apply h-full bg-primary-500 rounded-full transition-all duration-500;
  }

  /* Game Container */
  .game-container {
    @apply min-h-screen flex flex-col items-center justify-center p-4 md:p-8;
  }

  /* Display Headings */
  .heading-display {
    @apply text-4xl md:text-5xl lg:text-6xl font-display font-bold text-center;
  }

  /* Question Display */
  .question-display {
    @apply text-2xl md:text-3xl lg:text-4xl font-medium text-center leading-relaxed;
  }

  /* Answer Display */
  .answer-display {
    @apply text-5xl md:text-6xl lg:text-7xl font-display font-bold text-center text-gold-400;
  }

  /* Hint Card */
  .hint-card {
    @apply card p-6 text-xl md:text-2xl text-center bg-slate-800/80 backdrop-blur;
  }

  /* Help Button */
  .help-button {
    @apply btn-icon text-slate-500 hover:text-primary-400;
  }

  /* Modal Overlay */
  .modal-overlay {
    @apply fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4;
  }

  /* Modal Content */
  .modal-content {
    @apply card max-w-lg w-full max-h-[90vh] overflow-y-auto;
  }

  /* Step Indicator */
  .step-indicator {
    @apply flex items-center gap-2;
  }

  .step-dot {
    @apply w-3 h-3 rounded-full transition-all duration-300;
  }

  .step-dot-active {
    @apply bg-primary-500 scale-125;
  }

  .step-dot-completed {
    @apply bg-success-500;
  }

  .step-dot-pending {
    @apply bg-slate-600;
  }

  /* Toast/Notification */
  .toast {
    @apply fixed bottom-4 right-4 p-4 rounded-lg shadow-lg z-50 animate-slide-up;
  }

  .toast-success {
    @apply bg-success-600 text-white;
  }

  .toast-error {
    @apply bg-danger-600 text-white;
  }

  /* Admin Table */
  .admin-table {
    @apply w-full text-left;
  }

  .admin-table th {
    @apply px-4 py-3 text-sm font-semibold text-slate-400 uppercase tracking-wider bg-slate-800/50;
  }

  .admin-table td {
    @apply px-4 py-4 border-t border-slate-700/50;
  }

  .admin-table tr:hover td {
    @apply bg-slate-800/50;
  }
}

/* =====================================================
   Animations
   ===================================================== */
@layer utilities {
  @keyframes slide-up {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes fade-in {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes scale-in {
    from {
      transform: scale(0.9);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }

  @keyframes pulse-glow {
    0%, 100% {
      box-shadow: 0 0 20px rgba(250, 204, 21, 0.3);
    }
    50% {
      box-shadow: 0 0 40px rgba(250, 204, 21, 0.6);
    }
  }

  @keyframes fade-slide-in {
    from {
      opacity: 0;
      transform: translateY(8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-slide-up {
    animation: slide-up 0.3s ease-out;
  }

  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  .animate-scale-in {
    animation: scale-in 0.3s ease-out;
  }

  .animate-pulse-glow {
    animation: pulse-glow 2s ease-in-out infinite;
  }

  .animate-fade-slide-in {
    animation: fade-slide-in 0.25s ease-out;
  }
}

/* =====================================================
   iPad Landscape Optimization (1024x768)
   ===================================================== */

/* Target iPad landscape with Safari toolbars visible (~650px usable height) */
@media (min-width: 1024px) and (max-height: 800px) {
  /* Reduce padding for compact layout */
  .game-container {
    @apply p-4;
  }

  /* Ensure content fits without scrolling */
  .card-body {
    @apply p-4;
  }

  /* Slightly smaller headings */
  .heading-display {
    @apply text-3xl md:text-4xl;
  }

  .question-display {
    @apply text-xl md:text-2xl;
  }

  .answer-display {
    @apply text-4xl md:text-5xl;
  }
}

/* =====================================================
   Touch Target Optimization
   ===================================================== */

/* Ensure minimum touch targets (44x44px Apple guideline, 56px preferred) */
@layer utilities {
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  .touch-target-lg {
    min-height: 56px;
    min-width: 56px;
  }
}

/* =====================================================
   Vue Transition Classes
   ===================================================== */

/* Fade transition */
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.2s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

/* Slide-fade transition */
.slide-fade-enter-active {
  transition: all 0.25s ease-out;
}

.slide-fade-leave-active {
  transition: all 0.2s ease-in;
}

.slide-fade-enter-from {
  opacity: 0;
  transform: translateY(16px);
}

.slide-fade-leave-to {
  opacity: 0;
  transform: translateY(-8px);
}

/* Scale transition */
.scale-enter-active,
.scale-leave-active {
  transition: all 0.2s ease;
}

.scale-enter-from,
.scale-leave-to {
  opacity: 0;
  transform: scale(0.95);
}

/* Collapse transition for collapsible panels */
.collapse-enter-active,
.collapse-leave-active {
  transition: all 0.2s ease-out;
  overflow: hidden;
}

.collapse-enter-from,
.collapse-leave-to {
  opacity: 0;
  max-height: 0;
}

.collapse-enter-to,
.collapse-leave-from {
  opacity: 1;
  max-height: 500px;
}
